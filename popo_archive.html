<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="popo_archive/css/card.css" />
    <link rel="stylesheet" href="popo_archive/css/fire.css" />
    <title>popo archive ☕️</title>
    <meta property="og:title" content="popo archive ☕️" />
    <meta
      property="og:description"
      content="popo archive ☕️에서 커피 한 잔 어때요?"
    />
    <meta
      property="og:image"
      content="https://ldb-phinf.pstatic.net/20221104_77/1667551123222lbAHm_PNG/6F185708-6CBB-4756-ACF5-CAF5968BCA84.png"
    />
    <script
      src="https://code.jquery.com/jquery-3.6.3.min.js"
      integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
      crossorigin="anonymous"
    ></script>
  </head>
  <body onload="init()" onresize="init()">
    <div class="wrapper">
      <div
        id="card"
        class="card paper"
        onmousemove="handleMouseMove()"
        onmouseleave="reset()"
        ontouchstart="handleMouseMove()"
        ontouchmove="handleMouseMove()"
        ontouchend="reset()"
      >
        <div
          id="card__wrapper"
          class="card__wrapper"
          style="transform: rotateX(-10deg) rotateY(0deg)"
        >
          <div
            id="card__top"
            class="card__top"
            style="background-color: #ca5c89"
          ></div>
          <div class="card__top__img__1">
            <div id="firework" class="firework__wrapper">
              <div class="firework purple">
                <div class="fire__wrapper">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 53.39 53.39"
                  >
                    <defs>
                      <style>
                        .fr {
                          stroke-linecap: round;
                          stroke-miterlimit: 10;
                          stroke-width: 2.4px;
                        }
                      </style>
                    </defs>
                    <g id="레이어_2" data-name="레이어 2">
                      <g id="레이어_1-2" data-name="레이어 1">
                        <line
                          class="fr flake_2"
                          x1="26.7"
                          y1="1"
                          x2="26.7"
                          y2="7.98"
                        />
                        <line
                          class="fr flake_2"
                          x1="26.7"
                          y1="45.41"
                          x2="26.7"
                          y2="52.39"
                        />
                        <line
                          class="fr flake_2"
                          x1="52.39"
                          y1="26.7"
                          x2="45.41"
                          y2="26.7"
                        />
                        <line
                          class="fr flake_2"
                          x1="7.98"
                          y1="26.7"
                          x2="1"
                          y2="26.7"
                        />
                        <line
                          class="fr flake_2"
                          x1="39.88"
                          y1="4.64"
                          x2="36.3"
                          y2="10.63"
                        />
                        <line
                          class="fr flake_2"
                          x1="17.09"
                          y1="42.76"
                          x2="13.51"
                          y2="48.75"
                        />
                        <line
                          class="fr flake_2"
                          x1="48.99"
                          y1="13.92"
                          x2="42.94"
                          y2="17.39"
                        />
                        <line
                          class="fr flake_2"
                          x1="10.46"
                          y1="36"
                          x2="4.4"
                          y2="39.47"
                        />
                        <line
                          class="fr flake_2"
                          x1="48.81"
                          y1="39.78"
                          x2="42.81"
                          y2="36.22"
                        />
                        <line
                          class="fr flake_2"
                          x1="10.59"
                          y1="17.17"
                          x2="4.58"
                          y2="13.62"
                        />
                        <line
                          class="fr flake_2"
                          x1="38.76"
                          y1="49.39"
                          x2="35.48"
                          y2="43.22"
                        />
                        <line
                          class="fr flake_2"
                          x1="17.91"
                          y1="10.17"
                          x2="14.63"
                          y2="4.01"
                        />

                        <line
                          class="fr flake_1"
                          x1="29.41"
                          y1="13.33"
                          x2="28.67"
                          y2="16.96"
                        />
                        <line
                          class="fr flake_1"
                          x1="24.72"
                          y1="36.43"
                          x2="23.98"
                          y2="40.06"
                        />
                        <line
                          class="fr flake_1"
                          x1="40.06"
                          y1="29.41"
                          x2="36.43"
                          y2="28.67"
                        />
                        <line
                          class="fr flake_1"
                          x1="16.96"
                          y1="24.72"
                          x2="13.33"
                          y2="23.98"
                        />
                        <line
                          class="fr flake_1"
                          x1="35.89"
                          y1="16.61"
                          x2="33.39"
                          y2="19.35"
                        />
                        <line
                          class="fr flake_1"
                          x1="20"
                          y1="34.04"
                          x2="17.51"
                          y2="36.78"
                        />
                        <line
                          class="fr flake_1"
                          x1="39.65"
                          y1="22.41"
                          x2="36.13"
                          y2="23.57"
                        />
                        <line
                          class="fr flake_1"
                          x1="17.26"
                          y1="29.82"
                          x2="13.75"
                          y2="30.99"
                        />
                        <line
                          class="fr flake_1"
                          x1="36.82"
                          y1="35.84"
                          x2="34.07"
                          y2="33.36"
                        />
                        <line
                          class="fr flake_1"
                          x1="19.32"
                          y1="20.04"
                          x2="16.57"
                          y2="17.55"
                        />
                        <line
                          class="fr flake_1"
                          x1="30.57"
                          y1="39.77"
                          x2="29.52"
                          y2="36.22"
                        />
                        <line
                          class="fr flake_1"
                          x1="23.87"
                          y1="17.17"
                          x2="22.82"
                          y2="13.62"
                        />
                      </g>
                    </g>
                  </svg>
                </div>
              </div>
            </div>
          </div>
          <img
            class="card__top__img__2 balloons"
            src="https://files.vingle.network/processed?key=files/G0CUWIRCRG/F4176T6JQ/card__balloons.png&type=ratio&value=400:267&scale=md"
            alt="카드 풍선 이미지"
          />

          <img
            class="card__top__img__3"
            src="https://files.vingle.network/processed?key=files/G0CUWIRCRG/FP6C9Q41Y/heart.png&type=ratio&value=16:9&scale=md"
            alt="카드 사람 이미지"
          />
          <img
            class="card__top__img__4"
            src="https://files.vingle.network/processed?key=files/G0CUWIRCRG/FFLN7BGEP/popo.png&type=ratio&value=16:9&scale=md"
            alt="카드 사람 이미지"
          />
          <div id="card__bottom" class="card__bottom">
            <p class="card__bottomTxt" style="font-size: 25px">
              바쁜 하루에 핑크 포포가 주는<br />
              커피 한잔의 여유 ☕️ <br /><br />
              💖 <b>popo archive</b>로 놀러오세요 💖
            </p>
          </div>
        </div>
      </div>
      <div class="description">마우스를 박스 안에서 움직여보세요!</div>
    </div>

    <script>
      let $cardWrapper;
      let $cardTop, $cardBottom;
      let centerY, centerX;

      function fire() {
        $(".firework").addClass("on");
        setTimeout(function () {
          $(".firework").removeClass("on");
        }, 2500);
      }

      function drawFireWork() {
        var $fireWork = $("#firework");
        var $yellowFire = $(".firework")
          .clone()
          .removeClass("purple")
          .addClass("yellow");
        var $pinkFire = $(".firework")
          .clone()
          .removeClass("purple")
          .addClass("pink");
        $yellowFire.appendTo($fireWork);
        $pinkFire.appendTo($fireWork);

        var $fireworkClone = $fireWork.clone();
        $fireworkClone.appendTo($(".card__top__img__1"));
        $fireworkClone.css({
          transform: "rotateY(180deg)",
          "transform-style": "preserve-3d",
        });

        fire();

        var interval = setInterval(() => {
          fire();
        }, 2600);
      }

      function init() {
        $card = document.getElementById("card");
        $cardWrapper = document.getElementById("card__wrapper");
        $cardTop = document.getElementById("card__top");
        $cardBottom = document.getElementById("card__bottom");

        // 중앙 좌표값
        centerY = $cardTop.getBoundingClientRect().bottom;
        centerX =
          $cardTop.getBoundingClientRect().left +
          ($cardTop.getBoundingClientRect().right -
            $cardTop.getBoundingClientRect().left) /
            2;

        drawFireWork();
      }

      function reset() {
        $cardWrapper.style = "transform: rotateX(-10deg) rotateY(0deg);";
      }

      function handleMouseMove(event) {
        let eventDoc, doc, body;

        event = event || window.event;

        // 마우스 좌표
        let pageX = event.pageX ?? event.changedTouches[0].pageX;
        let pageY = event.pageY ?? event.changedTouches[0].pageY;

        let tempX, tempY;

        // rotateX
        if (pageX <= centerX) {
          // 중앙 좌표값보다 작을 때
          tempX = (centerX - pageX) * 0.4;
          tempX > 80 ? (tempX = 80) : (tempX = tempX);
        } else {
          // 중앙 좌표값보다 클 때
          tempX = (centerX - pageX) * 0.4;
          tempX < -80 ? (tempX = -80) : (tempX = tempX);
        }

        // rotateY
        if (pageY <= centerY) {
          // 중앙 좌표값보다 작을 때
          tempY = (centerY - pageY) * 0.3;
          tempY > 20 ? (tempY = 20) : (tempY = tempY);
          $cardWrapper.style =
            "transform: rotateX(" + tempY + "deg) rotateY(" + tempX + "deg);";
        } else {
          // 중앙 좌표값보다 클 때
          tempY = (centerY - pageY) * 0.3;
          tempY < -40 ? (tempY = -40) : (tempY = tempY);
          $cardWrapper.style =
            "transform: rotateX(" + tempY + "deg) rotateY(" + tempX + "deg);";
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        drawFireWork();
      });
    </script>
  </body>
</html>
